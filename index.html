
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>Zach Stednick</title>
	<meta name="author" content="Zach Stednick">

	
	<meta name="description" content="This year is the 100th anniversary of the National Park Service and I
was curious about how park attendance had changed recently. Andrew
Flowers of &hellip;">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="Zach Stednick" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script async="true" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
</head>


<body>
	<header id="header" class="inner"><h1><a href="/">Zach Stednick</a></h1>
<nav id="main-nav"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="https://www.google.com/search" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:stedy.github.io">
			</form>
		</div>
	</div>
</nav>
<nav id="sub-nav" class="alignright">
	<div class="social">
		
		
		
		<a class="twitter" href="http://twitter.com/zachstednick" title="Twitter">Twitter</a>
		
		
		<a class="github" href="https://github.com/stedy" title="GitHub">GitHub</a>
		
    
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
    
	</div>
	<form class="search" action="https://www.google.com/search" method="get">
		<input class="alignright" type="text" name="q" results="0">
		<input type="hidden" name="q" value="site:stedy.github.io">
	</form>
</nav>

</header>
	
		
	
	<div id="content" class="inner">


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2016/06/05/changes-in-nps-visits-over-time-with-d3/">
		
			Changes in NPS Visits Over Time With D3</a>
	</h2>
	<div class="entry-content">
		<p>This year is the 100th anniversary of the National Park Service and I
was curious about how park attendance had changed recently. Andrew
Flowers of FiveThirtyEight had a nice
<a href="http://fivethirtyeight.com/features/the-national-parks-have-never-been-more-popular/">overview</a>
using official <a href="https://irma.nps.gov/Stats/Reports/National">NPS data</a>.
The article was interesting but contrary to most of FiveThirtyEight&rsquo;s
pieces there was a stunning lack of interactivity in what I felt was the
main figure of the piece</p>

<p><img src="http://i2.wp.com/espnfivethirtyeight.files.wordpress.com/2016/05/flowers-national-parks-4.png?quality=90&strip=all&w=575&ssl=1"></p>

<p>Basically, Great Smoky Mountains NP has dominated attendance since its
creation but what other parks have recently become popular? I used
<a href="https://d3js.org/">D3</a> to make a simple line plot that allowed for
interactively exploring park attendance based on year over year change
from the mean attendance over the last ten years:</p>

<iframe src="http://zachstednick.com/deltaNP.html" marginwidth="0" marginheight="0" style="height:500px; width:1060px;" scrolling="no"></iframe>


<p>Clearly a spike in recent years - maybe due to lower gas prices or
increased popularity of social media?</p>

<p>Also, I was curious about what the trend looked like for the National
Monuments.</p>

<iframe src="http://zachstednick.com/deltaNM.html" marginwidth="0" marginheight="0" style="height:500px; width:1060px:" scrolling="no"></iframe>


<p>The most immediate trend that jumps out is the effect of the
<a href="https://en.wikipedia.org/wiki/Statue_of_Liberty#Closures_and_reopening_.282001.E2.80.93present.29">closing</a> of the <a href="https://www.nps.gov/stli/index.htm">Statue of Liberty</a> in 2011 which indirectly caused a slowdown in visits to <a href="https://www.nps.gov/cacl/index.htm">Castle Clinton</a>.</p>

<p>I aim to visit some new parks and monuments this summer and hopefully
looking at the data like this will help me avoid the crowds.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2016-06-05T11:24:26-07:00" pubdate data-updated="true"></time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/r-nps-d3/'>r,nps,d3</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2016/04/16/a-national-parks-tour-with-feather/">
		
			A National Parks Tour With Feather</a>
	</h2>
	<div class="entry-content">
		<p>This year is the 100th Anniversary of the National Park system and the
National Park Service is kicking things off with <a href="https://www.nps.gov/findapark/national-park-week.htm">National Park
Week</a> where every
National Park will be open for free. With all the savings, my next
thought was what would be the best way to visit all of them in a single
trip?</p>

<p>To calculate this, I used a variant of the <a href="https://en.wikipedia.org/wiki/Concorde_TSP_Solver">Concorde
algorithm</a> which is
an algorithm for solving the <a href="https://en.wikipedia.org/wiki/Traveling_salesman_problem">Traveling Salesman
Problem</a> or
what is the shortest route I can use to visit every National Park?</p>

<p>This also gave me an excellent opportunity to use
<a href="https://blog.rstudio.org/2016/03/29/feather/">Feather</a> a way of writing
dataframes to disk for interchanging between R and Python. I wanted to
use R largely due to Michael Hahsler&rsquo;s <a href="https://github.com/mhahsler/TSP">TSP
library</a> and I wanted to use python
because of the ease of use of the Google Maps API client. Finally, I
wanted to make a static map to show the route and I decided return to R
and use the <a href="https://github.com/dkahle/ggmap">ggmap library</a>.</p>

<p><img src="http://zachstednick.com/NP_tour.png"></p>

<p>I realize there are many ways to call R from Python and vice versa but I
wanted to try feather. As a first attempt, I was
pretty impressed with feather&rsquo;s ease of use. I did not have too large of
a dataset so I was unable to comment on the speed but simple reading and
writing in R and Python is made to feel very simple. The one issue I did run into was
more of a user issue and that it was challenging to rapidly flip back and forth
between the two languages as I iterated this code. The 0-index of Python versus
the 1-index of R is all handled by feather which is nice not to have to think
about.</p>

<p>As a whole, I highly recommend checking out feather and as for me, well
its time to hit the road and start visiting some National Parks and
according to Google Maps I only have 14832.8 miles to go.</p>

<p>My code for this lives
<a href="https://github.com/stedy/blog-supplemental">here</a></p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2016-04-16T12:35:08-07:00" pubdate data-updated="true"></time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/r-python-feather-nps/'>r,python,feather,nps</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2016/02/13/super-bowl-sunday-at-chucks/">
		
			Super Bowl Sunday at Chuck&#8217;s</a>
	</h2>
	<div class="entry-content">
		<p>In the same vein as my previous post on <a href="http://zachstednick.name/blog/2016/01/31/weekend-at-chucks/">beer sales analysis</a> at <a href="http://chucks85th.com/">Chuck&rsquo;s Hop Shop</a>, I wanted to make a similar analysis but this time focus on Super Bowl Sunday sales. Similar to last time, I made a few assumptions:</p>

<ul>
<li>A keg is on tap until it is empty.</li>
<li>Each keg only serves pints of beer.</li>
<li>A pint is the only unit served (ie no 8 oz. pours).</li>
</ul>


<p>Anyways, here is a brief summary of beers on tap for the shortest amount
of
time on Sunday:</p>

<table>
<thead>
<tr>
<th style="text-align:left;">Brewery      </th>
<th style="text-align:left;">Beer     </th>
<th style="text-align:left;">Hours on tap </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">Cloudburst    </td>
<td style="text-align:left;">Psycho Hose Beast&hellip;    </td>
<td style="text-align:left;">  0.25</td>
</tr>
<tr>
<td style="text-align:left;">Iron Fist     </td>
<td style="text-align:left;">Mint Chocolate Im&hellip;    </td>
<td style="text-align:left;">  1.00</td>
</tr>
<tr>
<td style="text-align:left;">Ballast Point </td>
<td style="text-align:left;">Watermelon Dorado&hellip;    </td>
<td style="text-align:left;">  1.00</td>
</tr>
<tr>
<td style="text-align:left;">Wander        </td>
<td style="text-align:left;">Wanderale, Belgia&hellip;    </td>
<td style="text-align:left;">  1.25</td>
</tr>
<tr>
<td style="text-align:left;">Sound         </td>
<td style="text-align:left;">Humonkulous IIIPA       </td>
<td style="text-align:left;">  1.25</td>
</tr>
<tr>
<td style="text-align:left;">Cloudburst    </td>
<td style="text-align:left;">Saison W/Grapefru&hellip;    </td>
<td style="text-align:left;">  1.25</td>
</tr>
<tr>
<td style="text-align:left;">Victory       </td>
<td style="text-align:left;">Prima Pilsner           </td>
<td style="text-align:left;">  1.75</td>
</tr>
<tr>
<td style="text-align:left;">Commons       </td>
<td style="text-align:left;">Holden Saison           </td>
<td style="text-align:left;">  2.00</td>
</tr>
<tr>
<td style="text-align:left;">Seattle Cider </td>
<td style="text-align:left;">Semi-Sweet Cider        </td>
<td style="text-align:left;">  3.00</td>
</tr>
<tr>
<td style="text-align:left;">Deschutes     </td>
<td style="text-align:left;">Abyss &lsquo;15  &frac12; Pint     </td>
<td style="text-align:left;">  3.00</td>
</tr>
</tbody>
</table>


<h1>Time on tap vs. ABV</h1>

<p>Did beer with higher ABV sell faster?</p>

<p><img src="http://zachstednick.com/SB_abv_count.png"></p>

<h1>Time on tap vs. cost</h1>

<p>Did more expensive beer sell faster?</p>

<p><img src="http://zachstednick.com/SB_cost_count.png"></p>

<h1>What does the relation between cost per pint and ABV look like?</h1>

<p><img src="http://zachstednick.com/SB_labeled.png"></p>

<p>Once again, all code lives <a href="https://github.com/stedy/chucks-beer-db">here</a></p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2016-02-13T20:58:15-08:00" pubdate data-updated="true"></time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/python-beer/'>python,beer</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2016/02/09/thoughts-on-pronto/">
		
			Thoughts on Pronto</a>
	</h2>
	<div class="entry-content">
		<p><a href="http://www.prontocycleshare.com/">Pronto bikeshare</a> is in serious
financial trouble and may not make it
until the end of <a href="http://www.seattlebikeblog.com/2016/02/04/pronto-needs-city-buyout-before-end-of-march-how-did-we-get-here/">March of this
year</a>.
There has been a lot of talk about the future of Pronto and funding but for now I
just wanted to mention a few of the things I like
about Pronto.</p>

<ul>
<li><p>It is an excellent great for connecting mass transit and your final destination.
Waiting for a bus transfer and then taking said transfer sometimes
feels like it takes forever and
hopping on a Pronto bike can make the trip dramatically faster.</p></li>
<li><p>It provides an ideal solution for just going somewhere and not worrying about your bike.
Worried about locking up your bike in a certain area at a certain
time? If there is a Pronto station nearby that problem can be easily
fixed.</p></li>
<li><p>It is fun, full stop. The bikes are very sturdy and while they can feel
a bit slow I never feel like they will have physical problems or break
down. Yeah, I
realize I look like a dork while riding it but then again I run
my own blog, who am I to judge?</p></li>
<li><p>Finally, cars treat you as if you have never been on a bike before and
give you significant leeway. On my commuter bike I often get buzzed by
cars but on a Pronto I get treated like some tourist who has no
clue what they are doing. From a safety standopint, thats pretty tough
to beat.</p></li>
</ul>


<p>I think that Pronto had a terrible rollout (starting a bikeshare program
in October?) and as multiple people have
shown, it does not have the best station placement compared to a
similarly sized metropolitan area.</p>

<blockquote class="twitter-tweet" data-lang="en"><p lang="en"
dir="ltr">Seattle&#39;s <a
href="https://twitter.com/CyclePronto">@CyclePronto</a> and DC&#39;s <a
href="https://twitter.com/bikeshare">@bikeshare</a> at the same scale.
Maybe hills &amp; helmets aren&#39;t the problem? <a
href="https://twitter.com/hashtag/SEABikes?src=hash">#SEABikes</a> <a
href="https://t.co/at9HjJkDxX">pic.twitter.com/at9HjJkDxX</a></p>&mdash;
Jake Vanderplas (@jakevdp) <a
href="https://twitter.com/jakevdp/status/695393881710419970">February 4,
2016</a></blockquote>


<script async src="//platform.twitter.com/widgets.js"
charset="utf-8"></script>


<p> I have had multiple
problems with bike docks and the helmet locker can sometimes be unresponsive. But, even after all that, I
am long on Pronto and am constantly telling people about it. I had an
<a href="http://prontostories.com">entry</a> in the <a href="http://www.prontocycleshare.com/datachallenge">Pronto Data
Challenge</a>. I was even
planning on doing both the <a href="http://www.cascade.org/rides-major-rides/emerald-city-bike-ride">Emerald
City Bike
Ride</a>
and
<a href="http://obliteride.org/">Obliteride</a> on a Pronto bike just because I
thought it would be fun.</p>

<p>Seattle is growing,
really fast in fact, and giving people as many transit options as
possible will only make it that much easier for people to move around. I
really hope that Pronto lasts longer than the end of March and is
eventually able
to expand to cover more areas. As to whether the city should step in to
save it or not, we&rsquo;ll leave that
exercise to the reader.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2016-02-09T17:21:05-08:00" pubdate data-updated="true"></time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/biking-seattle/'>biking,seattle</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2016/01/31/weekend-at-chucks/">
		
			Weekend at Chuck&#8217;s</a>
	</h2>
	<div class="entry-content">
		<p><a href="http://chucks85th.com">Chuck&rsquo;s Hop Shop on 85th</a> is a beer store with
40 beers on tap and hundreds if not thousands of bottled beers for sale.
I have always been curious about what types of beers they go though
fastest and what are some of the more popular breweries.
Fortunately, they post their current tap list on their website which
allowed me to look at their data over the course of the weekend.</p>

<p>I scraped their website every 15 minutes from opening Friday,
January 29 - closing Sunday, January 30th. Their website also lists cost
per pint,
cost per growler, and <a href="https://en.wikipedia.org/wiki/ABV">ABV</a>.</p>

<p>For the purposes of this analysis, I made a few assumptions:</p>

<ul>
<li>A keg is on tap until it is empty.</li>
<li>Each keg only serves pints of beer.</li>
<li>A pint is the only unit served (ie no 8 oz. pours).</li>
</ul>


<p>With these assumptions in mind, my first question was which beer goes
fastest? The below table shows beers that were on tap for five hours or
less:</p>

<table>
<thead>
<tr>
<th>Brewery         </th>
<th>Beer                 </th>
<th style="text-align:right;">    Minutes on tap </th>
</tr>
</thead>
<tbody>
<tr>
<td> Bale Breaker    </td>
<td> Field 41 Pale        </td>
<td style="text-align:right;">  74.98333</td>
</tr>
<tr>
<td> Boneyard        </td>
<td> Hop Venom IIPA       </td>
<td style="text-align:right;">  74.98333</td>
</tr>
<tr>
<td> Almanac         </td>
<td> Elephant Heart de&hellip; </td>
<td style="text-align:right;"> 134.98333</td>
</tr>
<tr>
<td> Firestone       </td>
<td> Wookey Jack CDA      </td>
<td style="text-align:right;"> 224.98333</td>
</tr>
<tr>
<td> pFriem          </td>
<td> Imperial IPA         </td>
<td style="text-align:right;"> 240.00833</td>
</tr>
<tr>
<td> Sound           </td>
<td> Dubbel Entendre      </td>
<td style="text-align:right;"> 270.00000</td>
</tr>
<tr>
<td> Bale Breaker    </td>
<td> Top Cutter IPA       </td>
<td style="text-align:right;"> 277.48333</td>
</tr>
<tr>
<td> Kulshan         </td>
<td> Bastard Kat IPA      </td>
<td style="text-align:right;"> 284.98333</td>
</tr>
<tr>
<td> Roslyn          </td>
<td> Brookside Pale Lager </td>
<td style="text-align:right;"> 284.98333</td>
</tr>
<tr>
<td> Breakside       </td>
<td> Vienna Coffee OG &hellip; </td>
<td style="text-align:right;"> 299.86667</td>
</tr>
<tr>
<td> Bale Breaker    </td>
<td> High Camp Winter &hellip; </td>
<td style="text-align:right;"> 300.00833</td>
</tr>
</tbody>
</table>


<p>In a first place tie for a duration of a stunning <em>1 hour fifteen</em> minutes were
Bale Breaker Field 41 Pale and Hop Venom IIPA. There may be
another explanation but with respective BeerAdvocate scores of
<a href="http://www.beeradvocate.com/beer/profile/31389/93176/?ba=beertunes">89</a>
and <a href="http://www.beeradvocate.com/beer/profile/23066/72750/">97</a>, its
easy to see why they are so popular.</p>

<h1>Price of a pint vs. ABV</h1>

<p>Is there a correlation between the price of a pint of beer and the ABV?</p>

<p><img src="http://zachstednick.com/cost_vs_abv.png"></p>

<h1>Drinking based on ABV</h1>

<p>Do beers with higher ABV get ordered faster?</p>

<p><img src="http://zachstednick.com/min_on_tap_vs_abv.png"></p>

<h1>Are beers at Chuck&rsquo;s veblen goods?</h1>

<p>Do pricier beer move faster?</p>

<p><img src="http://zachstednick.com/min_on_tap_vs_price.png"></p>

<p>Obviously there are many more types of analysis one could look at with
this data. I do think this analysis was sorely lacking in first person
research, something I intend to fix in the next analysis. Full code on
<a href="https://github.com/stedy/chucks-beer-db">github</a>.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2016-01-31T22:52:49-08:00" pubdate data-updated="true"></time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/r-python-beer/'>r,python,beer</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2016/01/13/2016-africa-reading-challenge/">
		
			2016 Africa Reading Challenge</a>
	</h2>
	<div class="entry-content">
		<p>A blog I occasionally read issues a challenge every year that is simply to read <a href="http://kinnareads.com/2016/01/06/2016-africa-reading-challenge/">five books from Africa</a>. Since it has been ten years since I moved from Africa back to the States, I figured this would be a good time to finally take on this challenge. I will likely be writing up shor reviews of these on my LibraryThing <a href="https://www.librarything.com/profile/pbirch01">page</a>. My current list includes:</p>

<ul>
<li>Tram 83 by Fiston Mwanza Mujila (<a href="https://www.librarything.com/work/15037664">LT page</a>)</li>
<li>The Fishermen by Chigozie Obioma (<a href="https://www.librarything.com/work/15400542">LT page</a>)</li>
<li>Waiting for the Barbarians by J.M. Coetzee (Really liked everything I
have read by him, not sure why I have never read this one. <a href="https://www.librarything.com/work/3619">LT
page</a>)</li>
<li>Wizard of the Crow by Ngugi wa&#8217;Thiong&#8217;o (Second book set in a
fictional country, perhaps a subtheme for the year? <a href="https://www.librarything.com/work/1026301">LT
page</a>)</li>
<li>The Second Coming of Mavala Shikongo by Peter Orner (Okay, not an
African writer but it is set where I used to live so I think well
worth bending the rules a bit for. <a href="https://www.librarything.com/work/853774">LT page</a></li>
</ul>


<p>Looking forward to this challenge and you should join in if you feel so
inclined.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2016-01-13T17:10:46-08:00" pubdate data-updated="true"></time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/2016-africa-books/'>2016,africa,books</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2015/12/28/summarizing-the-seattle-restaurant-scene-in-2015/">
		
			Summarizing the Seattle Restaurant Scene in 2015</a>
	</h2>
	<div class="entry-content">
		<p>Seattle is experiencing sustained economic growth which manifests
itself in a variety of ways, one of the most visible being changes in
the restaurant
industry. However, tracking the exact changes can be difficult due
to a variety of factors such the size of the city and the difficulty in
aggregating reliable data. There are several options for attempting to
track changes such as scraping data from a review site such as Yelp or
Zomato, systematically
checking the Food section of the local paper, or going straight to the city
records and attempt to
determine what restaurant permits are being issued over time.</p>

<p>For the purposes of this analysis, I decided to compare official city permit
records with the Food column from a local paper, specifically <a href="http://www.thestranger.com/">The
Stranger</a>.</p>

<p>Earlier this year, I started scraping the <a href="http://www.seattle.gov/licenses/find-a-business">City of Seattle Business
License
database</a> which
tracks both permit issuance and revocations. The City of Seattle site
classifies permits based on <a href="https://en.wikipedia.org/wiki/North_American_Industry_Classification_System">NAICS
codes</a>.
Because I am only interested in restaurant related permits, I focused on
the following five NAICS codes: Breweries, Drinking Places
(Alcoholic Beverages), Mobile Food Services, Limited-Service
Restaurants, and Full-Service Restaurants. I tracked changes in permits
by
week which when looked at for the entire year produces the following
figure:</p>

<p><img src="http://zachstednick.com/City_DB_NAICS_2015.png"></p>

<p>Clearly a good time to be in the food truck business. Also I am not sure
why so many Limited-Service Restaurants are closing and so many
Full-Service
Restaurants are opening. It could be simply that the restaurant decided
to expand its service or attempt to cater to a different clientele.
According to the official
<a href="http://www.census.gov/cgi-bin/sssd/naics/naicsrch?code=722511&amp;search=2012">definition</a>,
the NAICS code for Full-Service Restaurant
is that &ldquo;Providing food services to patrons who order and are served
while seated and pay after eating&rdquo;. For more details
on these changes, I have made an <a href="http://seattlerestaurantchanges.com">interactive
site</a> that allows you to further
investigate by neighborhood and restaurant type.</p>

<p>For comparison, I looked at every column I could
find by <a href="http://www.thestranger.com/authors/31833/angela-garbes">Angela
Garbes</a> who
seems to be the main restaurant reporter at The Stranger. I looked at
every restaurant opening and closing she mentioned in her
column. I then
<a href="https://docs.google.com/spreadsheets/d/1HFS4H8E-4RiM47pQzbauLzjfKSoEzv3IZ6Xl2PbHmIg/edit?usp=sharing">classified</a>
all the restaurants she mentioned
based on the same NAICS code to generate a similar figure:</p>

<p><img src="http://zachstednick.com/Stranger_NAICS_2015.png"></p>

<p>Obviously, she has a lot less data and her column is focused on more of
the narrative of big name restaurants that
have opened and less likely to focus on something like a new Taco Time.
She focuses a lot on local food events such as popup restaurants as well
as restaurant personnel which is not something that shows up in the
official city
statistics. Regardless, our figures look very similar and both of the
datasets
show that Full-Service Restaurants have had sustained growth over the
entire year, which makes for great storytelling either with data or a
narrative and
benefits all of us with increased diversity of restaurant options.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2015-12-28T12:50:02-08:00" pubdate data-updated="true"></time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/seattle-restaurants/'>seattle,restaurants</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2015/09/21/mapping-seattle-traffic-circles/">
		
			Mapping Seattle Traffic Circles</a>
	</h2>
	<div class="entry-content">
		<p>Recently, there was a post on Priceonomics about traffic circles with
the argument that roundabouts are <a href="http://priceonomics.com/the-case-for-more-traffic-roundabouts/">safer, help improve traffic flow, and
reduce emissions</a>.
The post mentions that there are 3700 roundabouts in the United States,
which made me wonder - how many of those are in Seattle?</p>

<p>Fortunately, the <a href="https://data.seattle.gov/">City of Seattle data site</a>
has GIS data for all streets as well as GIS data for all traffic
circles. The traffic circles dataset had 1042 total entries or about a
third of the total number of roundabouts in the United States. I&rsquo;m not
sure how accurate that is but I think focusing on traffic circles within
the city limits is more interesting.</p>

<p>I used the <a href="https://cran.r-project.org/web/packages/sp/">sp library</a> in
R to read in both sets of shapefiles and quickly determine the streets
with the highest number of roundabouts:</p>

<table>
<thead>
<tr>
<th> street </th>
<th style="text-align:right;"> count </th>
</tr>
</thead>
<tbody>
<tr>
<td> FREMONT AVE N </td>
<td style="text-align:right;"> 27</td>
</tr>
<tr>
<td> 1ST AVE NW </td>
<td style="text-align:right;"> 24</td>
</tr>
<tr>
<td> 8TH AVE NE </td>
<td style="text-align:right;"> 23</td>
</tr>
<tr>
<td> DAYTON AVE N </td>
<td style="text-align:right;"> 23</td>
</tr>
<tr>
<td> 6TH AVE NW </td>
<td style="text-align:right;"> 21</td>
</tr>
<tr>
<td> 12TH AVE NE </td>
<td style="text-align:right;"> 18</td>
</tr>
</tbody>
</table>


<p>Fremont Ave N. has a whopping 27 traffic circles which seems excessive
until you realize that most of these are North of the zoo and not in the
denser southern part of the street.</p>

<p>I thought quite a bit about how to best represent these values and
ultimately
settled on mapping streets colored to the number of traffic
circles on that street. I used R and <a href="http://colorbrewer2.org/">Color Brewer</a> to make a color attribute for the map based on traffic circle count that could be read by Leaflet. I wrote out my GeoJSON files using
<code>rgdal::writeOGR()</code> and then found that was way too slow to reasonably
run in a browser so I converted it to
<a href="https://github.com/mbostock/topojson">topojson</a> using <code>topojson -o colored_traffic_circles2.topojson -p color colored_traffic_circles.geojson</code>. Even this ran too slowly so I had to
reduce to streets with more than two traffic circles.</p>

<p><img src="http://zachstednick.com/seattle_traffic_circles.png"></p>

<p>Here the darker the color, the more traffic circles present on that
street. For me the most interesting feature is how many traffic circles
in a N-S
direction are right next to State Highway 99 or near I-5. Is this an
attempt to mitigate traffic of people trying to use surface streets
instead of arterials? Possibly, though difficult to determine.
Regardless, 1042 is an impressive amount of traffic circles for a
metropolitan area this large.</p>

<h2>Notes</h2>

<ul>
<li>The City dataset has dates on traffic circle installations with the
oldest traffic circle being 18TH AVE E AND E HARRISON ST installed on
1/5/1976</li>
<li>Full size version of this map available
<a href="http://zachstednick.com/seattle_traffic_circles.html">here</a></li>
<li>All code available <a href="https://github.com/stedy/blog-supplemental">here</a></li>
</ul>


		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2015-09-21T22:03:39-07:00" pubdate data-updated="true"></time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/gis-r-topojson/'>gis,r,topojson</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2015/09/04/subsetting-shapefiles-with-r/">
		
			Subsetting Shapefiles With R</a>
	</h2>
	<div class="entry-content">
		<p>I have been trying to improve my GIS skills lately and have been trying
to use R for as much of this process as I can. One of the tasks I
frequently perform is taking a shapefile, subsetting it, and then
converting to a GeoJSON. The npm module
<a href="https://www.npmjs.com/package/ogr2ogr">ogr2ogr</a> is excellent for
converting from a shapefile to GeoJSON, however I frequntly find myself
needing to select only certain areas of a shapefile. I have been using
two libraries in R to achieve this, specifically
<a href="https://cran.r-project.org/web/packages/rgdal/index.html">rgdal</a> and
<a href="https://cran.r-project.org/web/packages/sp/">sp</a>.</p>

<p>For example, lets use the Congressional District 2012 shapefiles from
the <a href="http://www.ofm.wa.gov/pop/geographic/tiger.asp">Washington State Office of Financial
Management</a>. Downloading
the file, unzipping, and then loading into R with</p>

<p><script
src="https://gist.github.com/stedy/b05e2e11e309b66eb28e.js"></script></p>

<p>We want to select only the districts that cover Seattle, 7 and 9 which
is as simple as subsetting</p>

<p><code>seattle.only &lt;- subset(wa.cd, CD113FP %in% c('07', '09'))</code></p>

<p>One of the nice features about GitHub gists is that you can overlay a
GeoJSON file on a Google map for a quick QC check. While R accepts a
variety of
projection formats, Github does not and I occasionally I find I have to
convert to the WGS84 datum which are easily done with</p>

<p><code>seattle.only.wgs &lt;- spTransform(seattle.only, CRS("+proj=longlat
+ellps=WGS84"))</code></p>

<p>And written out as a GeoJSON file with</p>

<p><code>writeOGR(seattle.only.wgs, dsn="seattle.only.wgs.geojson", layer="cd2012", driver="GeoJSON", check_exists = FALSE)</code></p>

<p>Occasionally I get an error about the file I am about to create not
being found. This Stack Overflow
<a href="http://stackoverflow.com/a/29743969/163809">answer</a> was very helpful
and now I add the <code>check_exists = FALSE</code> parameter every time I write
out with <code>writeOGR()</code>.</p>

<p><script
src="https://gist.github.com/stedy/3c4954baa0b1c96fc9e8.js"></script></p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2015-09-04T13:05:49-07:00" pubdate data-updated="true"></time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/gis-r-geojson/'>gis,r,geojson</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2015/09/02/fremont-bridge-opening-times/">
		
			Fremont Bridge Opening Times</a>
	</h2>
	<div class="entry-content">
		<p>I bike across the Fremont Bridge twice a day which Wikipedia
<a href="https://en.wikipedia.org/wiki/Fremont_Bridge_%28Seattle%29">claims</a> is
the most frequently opened bridge in the United States.
This claim is uncited and while it may be true, due to <a href="http://www.ecfr.gov/cgi-bin/text-idx?SID=cfc62d83403b960e08f5038e67b9ecd1&amp;node=33:1.0.1.10.61.1.65.3&amp;rgn=div8">Federal Maritime
Law</a>
boats get precedence for bridge opening with the exceptions of rush
hours which in Seattle are M-F 7-9 AM and 4-6 PM. I often get to the
bridge on my bike around 9 AM in the morning and 6 PM in the evening and
it
always felt like the bridge opens for a boat right at 9 and 6 PM on the
dot. I wanted to verify this and figured the only way to do so would be
to manually time the bridge openings but that seemed like too much
effort.</p>

<p>Recently, a <a href="https://twitter.com/brotherslogsdon">friend</a> notified me about the twitter account of <a href="https://twitter.com/sdotbridges">Seattle DOT
bridges</a> which is basically a bot that
posts bridge openings and closings such as:</p>

<blockquote class="twitter-tweet" lang="en"><p lang="en" dir="ltr">The
Fremont Bridge has closed to traffic - 9:43:03 AM</p>&mdash;
seattleDOTbridges (@SDOTbridges) <a
href="https://twitter.com/SDOTbridges/status/639116352200970240">September
2, 2015</a></blockquote>


<script async src="//platform.twitter.com/widgets.js"
charset="utf-8"></script>


<p>I used the excellent <a href="https://github.com/geoffjentry/twitteR">twitteR</a>
to scrape tweets from Seattle DOT bridges for the past month to test how
accurate my assumption was. From this, I pulled
the first crossing post morning rush hour and evening rush hour for
weekdays only.</p>

<p><img src="http://zachstednick.com/Fremont_bridge_openings.png"></p>

<p>The mean opening time post-morning rush was 9:28 AM and the mean opening
time post-evening rush was 9:25 which means that my assumptions were
pretty off and I should not feel so stressed to arrive at the bridge
before 9 AM and 6 PM.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2015-09-02T09:54:03-07:00" pubdate data-updated="true"></time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/biking-r-twitter/'>biking,r,twitter</a>


</div>
	
</div>
</article>

<nav id="pagenavi">
    
    
        <a href="/posts/2" class="next">Next</a>
    
    <div class="center"><a href="/blog/archives">Blog Archives</a></div>
</nav>
</div>
	<footer id="footer" class="inner">Copyright &copy; 2016

    Zach Stednick

</footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->






</body>
</html>