
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>Zach Stednick</title>
	<meta name="author" content="Zach Stednick">

	
	<meta name="description" content="Chuck&rsquo;s Hop Shop on 85th is a beer store with
40 beers on tap and hundreds if not thousands of bottled beers for sale.
I have always been &hellip;">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="Zach Stednick" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script async="true" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
</head>


<body>
	<header id="header" class="inner"><h1><a href="/">Zach Stednick</a></h1>
<nav id="main-nav"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="https://www.google.com/search" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:stedy.github.io">
			</form>
		</div>
	</div>
</nav>
<nav id="sub-nav" class="alignright">
	<div class="social">
		
		
		
		<a class="twitter" href="http://twitter.com/zachstednick" title="Twitter">Twitter</a>
		
		
		<a class="github" href="https://github.com/stedy" title="GitHub">GitHub</a>
		
    
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
    
	</div>
	<form class="search" action="https://www.google.com/search" method="get">
		<input class="alignright" type="text" name="q" results="0">
		<input type="hidden" name="q" value="site:stedy.github.io">
	</form>
</nav>

</header>
	
		
	
	<div id="content" class="inner">


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2016/01/31/weekend-at-chucks/">
		
			Weekend at Chuck&#8217;s</a>
	</h2>
	<div class="entry-content">
		<p><a href="http://chucks85th.com">Chuck&rsquo;s Hop Shop on 85th</a> is a beer store with
40 beers on tap and hundreds if not thousands of bottled beers for sale.
I have always been curious about what types of beers they go though
fastest and what are some of the more popular breweries.
Fortunately, they post their current tap list on their website which
allowed me to look at their data over the course of the weekend.</p>

<p>I scraped their website every 15 minutes from opening Friday,
January 29 - closing Sunday, January 30th. Their website also lists cost
per pint,
cost per growler, and <a href="https://en.wikipedia.org/wiki/ABV">ABV</a>.</p>

<p>For the purposes of this analysis, I made a few assumptions:</p>

<ul>
<li>A keg is on tap until it is empty.</li>
<li>Each keg only serves pints of beer.</li>
<li>A pint is the only unit served (ie no 8 oz. pours).</li>
</ul>


<p>With these assumptions in mind, my first question was which beer goes
fastest? The below table shows beers that were on tap for five hours or
less:</p>

<table>
<thead>
<tr>
<th>Brewery         </th>
<th>Beer                 </th>
<th style="text-align:right;">    Minutes on tap </th>
</tr>
</thead>
<tbody>
<tr>
<td> Bale Breaker    </td>
<td> Field 41 Pale        </td>
<td style="text-align:right;">  74.98333</td>
</tr>
<tr>
<td> Boneyard        </td>
<td> Hop Venom IIPA       </td>
<td style="text-align:right;">  74.98333</td>
</tr>
<tr>
<td> Almanac         </td>
<td> Elephant Heart de&hellip; </td>
<td style="text-align:right;"> 134.98333</td>
</tr>
<tr>
<td> Firestone       </td>
<td> Wookey Jack CDA      </td>
<td style="text-align:right;"> 224.98333</td>
</tr>
<tr>
<td> pFriem          </td>
<td> Imperial IPA         </td>
<td style="text-align:right;"> 240.00833</td>
</tr>
<tr>
<td> Sound           </td>
<td> Dubbel Entendre      </td>
<td style="text-align:right;"> 270.00000</td>
</tr>
<tr>
<td> Bale Breaker    </td>
<td> Top Cutter IPA       </td>
<td style="text-align:right;"> 277.48333</td>
</tr>
<tr>
<td> Kulshan         </td>
<td> Bastard Kat IPA      </td>
<td style="text-align:right;"> 284.98333</td>
</tr>
<tr>
<td> Roslyn          </td>
<td> Brookside Pale Lager </td>
<td style="text-align:right;"> 284.98333</td>
</tr>
<tr>
<td> Breakside       </td>
<td> Vienna Coffee OG &hellip; </td>
<td style="text-align:right;"> 299.86667</td>
</tr>
<tr>
<td> Bale Breaker    </td>
<td> High Camp Winter &hellip; </td>
<td style="text-align:right;"> 300.00833</td>
</tr>
</tbody>
</table>


<p>In a first place tie for a duration of a stunning <em>1 hour fifteen</em> minutes were
Bale Breaker Field 41 Pale and Hop Venom IIPA. There may be
another explanation but with respective BeerAdvocate scores of
<a href="http://www.beeradvocate.com/beer/profile/31389/93176/?ba=beertunes">89</a>
and <a href="http://www.beeradvocate.com/beer/profile/23066/72750/">97</a>, its
easy to see why they are so popular.</p>

<h1>Price of a pint vs. ABV</h1>

<p>Is there a correlation between the price of a pint of beer and the ABV?</p>

<p><img src="http://zachstednick.com/cost_vs_abv.png"></p>

<h1>Drinking based on ABV</h1>

<p>Do beers with higher ABV get ordered faster?</p>

<p><img src="http://zachstednick.com/min_on_tap_vs_abv.png"></p>

<h1>Are beers at Chuck&rsquo;s veblen goods?</h1>

<p>Do pricier beer move faster?</p>

<p><img src="http://zachstednick.com/min_on_tap_vs_price.png"></p>

<p>Obviously there are many more types of analysis one could look at with
this data. I do think this analysis was sorely lacking in first person
research, something I intend to fix in the next analysis. Full code on
<a href="https://github.com/stedy/chucks-beer-db">github</a>.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2016-01-31T22:52:49-08:00" pubdate data-updated="true"></time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/r-python-beer/'>r,python,beer</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2016/01/13/2016-africa-reading-challenge/">
		
			2016 Africa Reading Challenge</a>
	</h2>
	<div class="entry-content">
		<p>A blog I occasionally read issues a challenge every year that is simply to read <a href="http://kinnareads.com/2016/01/06/2016-africa-reading-challenge/">five books from Africa</a>. Since it has been ten years since I moved from Africa back to the States, I figured this would be a good time to finally take on this challenge. I will likely be writing up shor reviews of these on my LibraryThing <a href="https://www.librarything.com/profile/pbirch01">page</a>. My current list includes:</p>

<ul>
<li>Tram 83 by Fiston Mwanza Mujila (<a href="https://www.librarything.com/work/15037664">LT page</a>)</li>
<li>The Fishermen by Chigozie Obioma (<a href="https://www.librarything.com/work/15400542">LT page</a>)</li>
<li>Waiting for the Barbarians by J.M. Coetzee (Really liked everything I
have read by him, not sure why I have never read this one. <a href="https://www.librarything.com/work/3619">LT
page</a>)</li>
<li>Wizard of the Crow by Ngugi wa&#8217;Thiong&#8217;o (Second book set in a
fictional country, perhaps a subtheme for the year? <a href="https://www.librarything.com/work/1026301">LT
page</a>)</li>
<li>The Second Coming of Mavala Shikongo by Peter Orner (Okay, not an
African writer but it is set where I used to live so I think well
worth bending the rules a bit for. <a href="https://www.librarything.com/work/853774">LT page</a></li>
</ul>


<p>Looking forward to this challenge and you should join in if you feel so
inclined.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2016-01-13T17:10:46-08:00" pubdate data-updated="true"></time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/2016-africa-books/'>2016,africa,books</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2015/12/28/summarizing-the-seattle-restaurant-scene-in-2015/">
		
			Summarizing the Seattle Restaurant Scene in 2015</a>
	</h2>
	<div class="entry-content">
		<p>Seattle is experiencing sustained economic growth which manifests
itself in a variety of ways, one of the most visible being changes in
the restaurant
industry. However, tracking the exact changes can be difficult due
to a variety of factors such the size of the city and the difficulty in
aggregating reliable data. There are several options for attempting to
track changes such as scraping data from a review site such as Yelp or
Zomato, systematically
checking the Food section of the local paper, or going straight to the city
records and attempt to
determine what restaurant permits are being issued over time.</p>

<p>For the purposes of this analysis, I decided to compare official city permit
records with the Food column from a local paper, specifically <a href="http://www.thestranger.com/">The
Stranger</a>.</p>

<p>Earlier this year, I started scraping the <a href="http://www.seattle.gov/licenses/find-a-business">City of Seattle Business
License
database</a> which
tracks both permit issuance and revocations. The City of Seattle site
classifies permits based on <a href="https://en.wikipedia.org/wiki/North_American_Industry_Classification_System">NAICS
codes</a>.
Because I am only interested in restaurant related permits, I focused on
the following five NAICS codes: Breweries, Drinking Places
(Alcoholic Beverages), Mobile Food Services, Limited-Service
Restaurants, and Full-Service Restaurants. I tracked changes in permits
by
week which when looked at for the entire year produces the following
figure:</p>

<p><img src="http://zachstednick.com/City_DB_NAICS_2015.png"></p>

<p>Clearly a good time to be in the food truck business. Also I am not sure
why so many Limited-Service Restaurants are closing and so many
Full-Service
Restaurants are opening. It could be simply that the restaurant decided
to expand its service or attempt to cater to a different clientele.
According to the official
<a href="http://www.census.gov/cgi-bin/sssd/naics/naicsrch?code=722511&amp;search=2012">definition</a>,
the NAICS code for Full-Service Restaurant
is that &ldquo;Providing food services to patrons who order and are served
while seated and pay after eating&rdquo;. For more details
on these changes, I have made an <a href="http://seattlerestaurantchanges.com">interactive
site</a> that allows you to further
investigate by neighborhood and restaurant type.</p>

<p>For comparison, I looked at every column I could
find by <a href="http://www.thestranger.com/authors/31833/angela-garbes">Angela
Garbes</a> who
seems to be the main restaurant reporter at The Stranger. I looked at
every restaurant opening and closing she mentioned in her
column. I then
<a href="https://docs.google.com/spreadsheets/d/1HFS4H8E-4RiM47pQzbauLzjfKSoEzv3IZ6Xl2PbHmIg/edit?usp=sharing">classified</a>
all the restaurants she mentioned
based on the same NAICS code to generate a similar figure:</p>

<p><img src="http://zachstednick.com/Stranger_NAICS_2015.png"></p>

<p>Obviously, she has a lot less data and her column is focused on more of
the narrative of big name restaurants that
have opened and less likely to focus on something like a new Taco Time.
She focuses a lot on local food events such as popup restaurants as well
as restaurant personnel which is not something that shows up in the
official city
statistics. Regardless, our figures look very similar and both of the
datasets
show that Full-Service Restaurants have had sustained growth over the
entire year, which makes for great storytelling either with data or a
narrative and
benefits all of us with increased diversity of restaurant options.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2015-12-28T12:50:02-08:00" pubdate data-updated="true"></time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/seattle-restaurants/'>seattle,restaurants</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2015/09/21/mapping-seattle-traffic-circles/">
		
			Mapping Seattle Traffic Circles</a>
	</h2>
	<div class="entry-content">
		<p>Recently, there was a post on Priceonomics about traffic circles with
the argument that roundabouts are <a href="http://priceonomics.com/the-case-for-more-traffic-roundabouts/">safer, help improve traffic flow, and
reduce emissions</a>.
The post mentions that there are 3700 roundabouts in the United States,
which made me wonder - how many of those are in Seattle?</p>

<p>Fortunately, the <a href="https://data.seattle.gov/">City of Seattle data site</a>
has GIS data for all streets as well as GIS data for all traffic
circles. The traffic circles dataset had 1042 total entries or about a
third of the total number of roundabouts in the United States. I&rsquo;m not
sure how accurate that is but I think focusing on traffic circles within
the city limits is more interesting.</p>

<p>I used the <a href="https://cran.r-project.org/web/packages/sp/">sp library</a> in
R to read in both sets of shapefiles and quickly determine the streets
with the highest number of roundabouts:</p>

<table>
<thead>
<tr>
<th> street </th>
<th style="text-align:right;"> count </th>
</tr>
</thead>
<tbody>
<tr>
<td> FREMONT AVE N </td>
<td style="text-align:right;"> 27</td>
</tr>
<tr>
<td> 1ST AVE NW </td>
<td style="text-align:right;"> 24</td>
</tr>
<tr>
<td> 8TH AVE NE </td>
<td style="text-align:right;"> 23</td>
</tr>
<tr>
<td> DAYTON AVE N </td>
<td style="text-align:right;"> 23</td>
</tr>
<tr>
<td> 6TH AVE NW </td>
<td style="text-align:right;"> 21</td>
</tr>
<tr>
<td> 12TH AVE NE </td>
<td style="text-align:right;"> 18</td>
</tr>
</tbody>
</table>


<p>Fremont Ave N. has a whopping 27 traffic circles which seems excessive
until you realize that most of these are North of the zoo and not in the
denser southern part of the street.</p>

<p>I thought quite a bit about how to best represent these values and
ultimately
settled on mapping streets colored to the number of traffic
circles on that street. I used R and <a href="http://colorbrewer2.org/">Color Brewer</a> to make a color attribute for the map based on traffic circle count that could be read by Leaflet. I wrote out my GeoJSON files using
<code>rgdal::writeOGR()</code> and then found that was way too slow to reasonably
run in a browser so I converted it to
<a href="https://github.com/mbostock/topojson">topojson</a> using <code>topojson -o colored_traffic_circles2.topojson -p color colored_traffic_circles.geojson</code>. Even this ran too slowly so I had to
reduce to streets with more than two traffic circles.</p>

<p><img src="http://zachstednick.com/seattle_traffic_circles.png"></p>

<p>Here the darker the color, the more traffic circles present on that
street. For me the most interesting feature is how many traffic circles
in a N-S
direction are right next to State Highway 99 or near I-5. Is this an
attempt to mitigate traffic of people trying to use surface streets
instead of arterials? Possibly, though difficult to determine.
Regardless, 1042 is an impressive amount of traffic circles for a
metropolitan area this large.</p>

<h2>Notes</h2>

<ul>
<li>The City dataset has dates on traffic circle installations with the
oldest traffic circle being 18TH AVE E AND E HARRISON ST installed on
1/5/1976</li>
<li>Full size version of this map available
<a href="http://zachstednick.com/seattle_traffic_circles.html">here</a></li>
<li>All code available <a href="https://github.com/stedy/blog-supplemental">here</a></li>
</ul>


		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2015-09-21T22:03:39-07:00" pubdate data-updated="true"></time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/gis-r-topojson/'>gis,r,topojson</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2015/09/04/subsetting-shapefiles-with-r/">
		
			Subsetting Shapefiles With R</a>
	</h2>
	<div class="entry-content">
		<p>I have been trying to improve my GIS skills lately and have been trying
to use R for as much of this process as I can. One of the tasks I
frequently perform is taking a shapefile, subsetting it, and then
converting to a GeoJSON. The npm module
<a href="https://www.npmjs.com/package/ogr2ogr">ogr2ogr</a> is excellent for
converting from a shapefile to GeoJSON, however I frequntly find myself
needing to select only certain areas of a shapefile. I have been using
two libraries in R to achieve this, specifically
<a href="https://cran.r-project.org/web/packages/rgdal/index.html">rgdal</a> and
<a href="https://cran.r-project.org/web/packages/sp/">sp</a>.</p>

<p>For example, lets use the Congressional District 2012 shapefiles from
the <a href="http://www.ofm.wa.gov/pop/geographic/tiger.asp">Washington State Office of Financial
Management</a>. Downloading
the file, unzipping, and then loading into R with</p>

<p><script
src="https://gist.github.com/stedy/b05e2e11e309b66eb28e.js"></script></p>

<p>We want to select only the districts that cover Seattle, 7 and 9 which
is as simple as subsetting</p>

<p><code>seattle.only &lt;- subset(wa.cd, CD113FP %in% c('07', '09'))</code></p>

<p>One of the nice features about GitHub gists is that you can overlay a
GeoJSON file on a Google map for a quick QC check. While R accepts a
variety of
projection formats, Github does not and I occasionally I find I have to
convert to the WGS84 datum which are easily done with</p>

<p><code>seattle.only.wgs &lt;- spTransform(seattle.only, CRS("+proj=longlat
+ellps=WGS84"))</code></p>

<p>And written out as a GeoJSON file with</p>

<p><code>writeOGR(seattle.only.wgs, dsn="seattle.only.wgs.geojson", layer="cd2012", driver="GeoJSON", check_exists = FALSE)</code></p>

<p>Occasionally I get an error about the file I am about to create not
being found. This Stack Overflow
<a href="http://stackoverflow.com/a/29743969/163809">answer</a> was very helpful
and now I add the <code>check_exists = FALSE</code> parameter every time I write
out with <code>writeOGR()</code>.</p>

<p><script
src="https://gist.github.com/stedy/3c4954baa0b1c96fc9e8.js"></script></p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2015-09-04T13:05:49-07:00" pubdate data-updated="true"></time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/gis-r-geojson/'>gis,r,geojson</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2015/09/02/fremont-bridge-opening-times/">
		
			Fremont Bridge Opening Times</a>
	</h2>
	<div class="entry-content">
		<p>I bike across the Fremont Bridge twice a day which Wikipedia
<a href="https://en.wikipedia.org/wiki/Fremont_Bridge_%28Seattle%29">claims</a> is
the most frequently opened bridge in the United States.
This claim is uncited and while it may be true, due to <a href="http://www.ecfr.gov/cgi-bin/text-idx?SID=cfc62d83403b960e08f5038e67b9ecd1&amp;node=33:1.0.1.10.61.1.65.3&amp;rgn=div8">Federal Maritime
Law</a>
boats get precedence for bridge opening with the exceptions of rush
hours which in Seattle are M-F 7-9 AM and 4-6 PM. I often get to the
bridge on my bike around 9 AM in the morning and 6 PM in the evening and
it
always felt like the bridge opens for a boat right at 9 and 6 PM on the
dot. I wanted to verify this and figured the only way to do so would be
to manually time the bridge openings but that seemed like too much
effort.</p>

<p>Recently, a <a href="https://twitter.com/brotherslogsdon">friend</a> notified me about the twitter account of <a href="https://twitter.com/sdotbridges">Seattle DOT
bridges</a> which is basically a bot that
posts bridge openings and closings such as:</p>

<blockquote class="twitter-tweet" lang="en"><p lang="en" dir="ltr">The
Fremont Bridge has closed to traffic - 9:43:03 AM</p>&mdash;
seattleDOTbridges (@SDOTbridges) <a
href="https://twitter.com/SDOTbridges/status/639116352200970240">September
2, 2015</a></blockquote>


<script async src="//platform.twitter.com/widgets.js"
charset="utf-8"></script>


<p>I used the excellent <a href="https://github.com/geoffjentry/twitteR">twitteR</a>
to scrape tweets from Seattle DOT bridges for the past month to test how
accurate my assumption was. From this, I pulled
the first crossing post morning rush hour and evening rush hour for
weekdays only.</p>

<p><img src="http://zachstednick.com/Fremont_bridge_openings.png"></p>

<p>The mean opening time post-morning rush was 9:28 AM and the mean opening
time post-evening rush was 9:25 which means that my assumptions were
pretty off and I should not feel so stressed to arrive at the bridge
before 9 AM and 6 PM.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2015-09-02T09:54:03-07:00" pubdate data-updated="true"></time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/biking-r-twitter/'>biking,r,twitter</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2015/08/16/batch-collection-of-park-boundaries-with-open-street-map/">
		
			Batch Collection of Park Boundaries With Open Street Map</a>
	</h2>
	<div class="entry-content">
		<p>Open Street Map (OSM) is, simply put, a freely available and editable
map of the <a href="http://www.openstreetmap.org">world</a>. I have been interested in
improving the availability of <a href="https://github.com/openseattle/seattle-boundaries">boundaries in Seattle</a> and wanted
to add park boundaries to this list as well. It was easy to look up
boundaries on OSM, for example <a href="http://www.openstreetmap.org/way/53600070">Salmon Bay Park</a> shows the various nodes that
make up its boundaries. But I had struggled with how to automate this
search since at last count Seattle had over <a href="http://www.seattle.gov/parks/listall.asp">400
parks</a>. After months of
struggling with the OSM API, I fortuitously stumbed
across the following tweet:</p>

<blockquote class="twitter-tweet" lang="en"><p lang="en" dir="ltr">Two
map data posts:&#10;&#10;Historic map warping for <a
href="https://twitter.com/somethingmodern">@somethingmodern</a> <a
href="http://t.co/7POw8PNBXI">http://t.co/7POw8PNBXI</a>&#10;&#10;Data
from OSM for <a href="https://twitter.com/alignedleft">@alignedleft</a>
<a href="http://t.co/DqxAuyPunh">http://t.co/DqxAuyPunh</a></p>&mdash;
Michal Migurski (@michalmigurski) <a
href="https://twitter.com/michalmigurski/status/632613151721193472">August
15, 2015</a></blockquote>


<script async src="//platform.twitter.com/widgets.js"
charset="utf-8"></script>


<p>This tweet lead me to Mapzen which provides a service called <a href="https://mapzen.com/data/metro-extracts/">Metro
Extracts</a> which provides
datasets from OSM on a weekly basis. I downloaded the OSM2PGSQL GeoJSON
file for Seattle which provided me files for Line, Point, and
Polygon geometries. I then used
<a href="https://www.npmjs.com/package/ogr2ogr">ogr2ogr</a> to filter for parks
only with the command</p>

<p><code>ogr2ogr select 'osm_id, name, geometry' where "leisure = 'park'"</code></p>

<p>This produced a GeoJSON file that looked like this:</p>

<script src="https://gist.github.com/stedy/d11ab757400fd5375796.js"></script>


<p>Obviously, more filtering needed to be done. Since many of these parks
were not in Seattle, I used the Nominatim API to search for each park
based on the OSM ID number. For example, the above mentioned park Salmon
Bay Park returns a nicely formatted <a href="http://nominatim.openstreetmap.org/lookup?osm_ids=W53600070">XML
file</a> which
I just filtered based on city.</p>

<p>Even after this there were still parks that were wrongly labelled as
being in Seattle. I loaded the file into R and subset based on OSM ID
and then used
<a href="https://cran.r-project.org/web/packages/rgdal/">rgdal</a> to write the
final result out as a GeoJSON file.</p>

<script src="https://gist.github.com/stedy/1ef0a40bc8c29f7412a0.js"></script>


<p>The take home lesson for me is that OSM is an excellent service but as
with any publically annotated dataset be prepared to invest some time
into cleaning and validating the data.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2015-08-16T12:16:39-07:00" pubdate data-updated="true"></time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/geojson/'>geojson,</a>, <a class='category' href='/blog/categories/osm/'>osm</a>, <a class='category' href='/blog/categories/r/'>r,</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2015/07/23/update-on-restaurant-changes/">
		
			Update on Restaurant Changes</a>
	</h2>
	<div class="entry-content">
		<p>I have been tracking restaurant openings via the <a href="http://www.seattle.gov/licenses/find-a-business">City of Seattle
Business Finder</a> since
the beginning of this year and am reporting those changes at <a href="http://seattlerestaurantchanges.com/">Seattle
Restaurant Changes</a>. Recently I
put up a <a href="http://seattlerestaurantchanges.com/heatmap.html">heatmap</a>
showing changes by neighborhood. This heatmap shows a current snaphot of
the changes which made me curious about changes by restaurant type over the course of
the year.</p>

<iframe width="980" height="520" src="http://zachstednick.com/net_restaurant_changes.html"></iframe>


<p>A few notes:</p>

<ul>
<li><p>The City of Seattle uses North American Industry Classification System
codes <a href="http://www.census.gov/eos/www/naics/">(NAICS)</a> to track
restaurants. I then use the date of permit issuance as a proxy for a
restaurant opening and date of permit revocation as a proxy for closing.</p></li>
<li><p>A Full Service Restaurant as defined by NAICS is &ldquo;establishments primarily engaged in providing food services to patrons who order and are served while seated (i.e., waiter/waitress service) and pay after eating&rdquo;</p></li>
<li><p>I realized that not that many breweries would be opening up but who
doesn&rsquo;t want more breweries in town?</p></li>
<li><p>I was not expecting Full Service Restaurants to take off as much as
they did, especially since Limited Service Restaurants seem to be
declining.</p></li>
</ul>


<p>I will try to post another update on this in December, that is unless I decide to open up a food truck of my own.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2015-07-23T15:31:31-07:00" pubdate data-updated="true"></time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/d3/'>d3,</a>, <a class='category' href='/blog/categories/restaurants/'>restaurants,</a>, <a class='category' href='/blog/categories/seattle/'>seattle</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2015/05/30/the-felix-factor/">
		
			The Felix Factor</a>
	</h2>
	<div class="entry-content">
		<p>I was listening to the Jonah Keri
<a href="http://espn.go.com/espnradio/grantland/player?id=12957030">podcast</a> and
he and Ben Gibbard were talking about the Mariners, specifically <a href="http://m.mlb.com/player/433587/felix-hernandez/2015/career/R/pitching/MLB">Felix
Hernandez</a>.
One of the points Gibbard made was that Hernandez is so outstanding that
he will be remembered and that people should try to see him pitch in
person. This made me wonder, did Felix Hernandez have an impact on home
ticket sales for the Mariners in 2014?</p>

<p>I was able to get all the data from some of the nicely formatted box
score data that <a href="http://gd2.mlb.com/components/game/mlb/year_2014/">MLB provides</a>. I initially tried to look at the data over the course of the year but attendance was so variable (which made for an extremely confusing plot) that I just ended up making a box and whiskers plot and ignored the date element:</p>

<p><img src="http://zachstednick.com/felix_factor.png"></p>

<p>Conclusion: Hernandez was not that strong of a driver of ticket sales
which is great news if you are hoping to see him pitching in person.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2015-05-30T16:12:37-07:00" pubdate data-updated="true"></time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/baseball/'>baseball,</a>, <a class='category' href='/blog/categories/r/'>r</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2015/04/17/seattle-restaurant-changes/">
		
			Seattle Restaurant Changes</a>
	</h2>
	<div class="entry-content">
		<p>Seattle construction is currently booming and I was interested in how
that
reflected in the local restaurant scene. There are many food blogs and
local news sites that cover openings and closings, but I found it too
difficult to parse these in a regular manner. Fortunately I was able to
use data from the <a href="http://www.seattle.gov/licenses/find-a-business">City of Seattle business
finder</a> and used the
restaurant classification or
<a href="https://en.wikipedia.org/wiki/NAICS">NAICS</a> code as a proxy. Using the
data in this manner makes an assumption that a restaurant will no longer
have a business licence after it closes.
I&rsquo;m not sure how accurate this is but I figured it was as accurate as I
could get short of hiring people on Mechanical Turk to phone every
restaurant every week and ask if the restaurant is still open. To map each
restaurant to a particular neighborhood, I
used geolocation to map license address returned by the City of Seattle business
finder. Obviously that does not work as well for Mobile Food Services
(i.e. food trucks) but it still allows for an interesting comparison.
This data is plotted at <a href="http://seattlerestaurantchanges.com">Seattle Restaurant
Changes</a>.</p>

<p>I initially attempted to scrape
data from <a href="https://www.thestranger.com/food-and-drink">The Stranger</a> but
after finding the City of Seattle site I just used
<a href="http://www.crummy.com/software/BeautifulSoup/">BeautifulSoup</a> for the
scraping. I would not have been able to do much more beyond that state
if it had not been for Nathan Yau&rsquo;s excellent tutorial on <a href="http://flowingdata.com/2015/02/19/make-an-interactive-map-with-category-filters/">making maps
with category
filters</a>.
I was able to get a state level shapefile for Washington state from
<a href="http://www.zillow.com/blog/7000-neighborhood-boundary-files-in-shapefile-format-4653/">Zillow</a>
and then reduce that to just Seattle neighborhoods using R&rsquo;s
<a href="http://cran.r-project.org/web/packages/sp/">sp</a> package. Full code
posted on <a href="https://github.com/stedy/seattle-restaurants">github</a></p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2015-04-17T10:51:18-07:00" pubdate data-updated="true"></time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/d3/'>d3</a>, <a class='category' href='/blog/categories/restaurants/'>restaurants,</a>


</div>
	
</div>
</article>

<nav id="pagenavi">
    
        
            <a href="/posts/2" class="prev">Prev</a>
        
    
    
        <a href="/posts/4" class="next">Next</a>
    
    <div class="center"><a href="/blog/archives">Blog Archives</a></div>
</nav>
</div>
	<footer id="footer" class="inner">Copyright &copy; 2018

    Zach Stednick

</footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->






</body>
</html>